const data = [
    {
        isDir: 1,
        name: '1_Candidatura',
        url: 'https://github.com/SWATEngineering/SWATEngineering.github.io/tree/main/1_Candidatura',
        size: '0b',
        dir: [
            {
                isDir: 0,
                name: 'LetteraDiPresentazione.pdf',
                url: 'https://raw.githubusercontent.com/SWATEngineering/SWATEngineering.github.io/main/1_Candidatura/LetteraDiPresentazione.pdf',
                size: '148Kb',
            },
            {
                isDir: 0,
                name: 'PreventivoCostiEAssunzioneImpegni.pdf',
                url: 'https://raw.githubusercontent.com/SWATEngineering/SWATEngineering.github.io/main/1_Candidatura/PreventivoCostiEAssunzioneImpegni.pdf',
                size: '197Kb',
            },
            {
                isDir: 0,
                name: 'ValutazioneCapitolati.pdf',
                url: 'https://raw.githubusercontent.com/SWATEngineering/SWATEngineering.github.io/main/1_Candidatura/ValutazioneCapitolati.pdf',
                size: '240Kb',
            },
            {
                isDir: 1,
                name: 'VerbaliEsterni',
                url: 'https://github.com/SWATEngineering/SWATEngineering.github.io/tree/main/1_Candidatura/VerbaliEsterni',
                size: '0b',
                dir: [
                    {
                        isDir: 0,
                        name: 'VerbaleEsterno_231020_0.1.pdf',
                        url: 'https://raw.githubusercontent.com/SWATEngineering/SWATEngineering.github.io/main/1_Candidatura/VerbaliEsterni/VerbaleEsterno_231020_0.1.pdf',
                        size: '2Mb',
                    },
                    {
                        isDir: 0,
                        name: 'VerbaleEsterno_231030_0.1.pdf',
                        url: 'https://raw.githubusercontent.com/SWATEngineering/SWATEngineering.github.io/main/1_Candidatura/VerbaliEsterni/VerbaleEsterno_231030_0.1.pdf',
                        size: '300Kb',
                    },
                ],
            },
            {
                isDir: 1,
                name: 'VerbaliInterni',
                url: 'https://github.com/SWATEngineering/SWATEngineering.github.io/tree/main/1_Candidatura/VerbaliInterni',
                size: '0b',
                dir: [
                    {
                        isDir: 0,
                        name: 'VerbaleInterno_231018_0.1.pdf',
                        url: 'https://raw.githubusercontent.com/SWATEngineering/SWATEngineering.github.io/main/1_Candidatura/VerbaliInterni/VerbaleInterno_231018_0.1.pdf',
                        size: '169Kb',
                    },
                    {
                        isDir: 0,
                        name: 'VerbaleInterno_231025_0.1.pdf',
                        url: 'https://raw.githubusercontent.com/SWATEngineering/SWATEngineering.github.io/main/1_Candidatura/VerbaliInterni/VerbaleInterno_231025_0.1.pdf',
                        size: '174Kb',
                    },
                ],
            },
        ],
    },
    {
        isDir: 1,
        name: '2_RTB',
        url: 'https://github.com/SWATEngineering/SWATEngineering.github.io/tree/main/2_RTB',
        size: '0b',
        dir: [
            {
                isDir: 0,
                name: 'AnalisiDeiRequisiti_1.0.pdf',
                url: 'https://raw.githubusercontent.com/SWATEngineering/SWATEngineering.github.io/main/2_RTB/AnalisiDeiRequisiti_1.0.pdf',
                size: '2Mb',
            },
            {
                isDir: 0,
                name: 'Glossario_1.0.pdf',
                url: 'https://raw.githubusercontent.com/SWATEngineering/SWATEngineering.github.io/main/2_RTB/Glossario_1.0.pdf',
                size: '175Kb',
            },
            {
                isDir: 0,
                name: 'LetteraDiPresentazioneRTB_.pdf',
                url: 'https://raw.githubusercontent.com/SWATEngineering/SWATEngineering.github.io/main/2_RTB/LetteraDiPresentazioneRTB_.pdf',
                size: '128Kb',
            },
            {
                isDir: 0,
                name: 'NormeDiProgetto_1.0.pdf',
                url: 'https://raw.githubusercontent.com/SWATEngineering/SWATEngineering.github.io/main/2_RTB/NormeDiProgetto_1.0.pdf',
                size: '661Kb',
            },
            {
                isDir: 0,
                name: 'PianoDiProgetto_1.0.pdf',
                url: 'https://raw.githubusercontent.com/SWATEngineering/SWATEngineering.github.io/main/2_RTB/PianoDiProgetto_1.0.pdf',
                size: '2Mb',
            },
            {
                isDir: 0,
                name: 'PianoDiQualifica_1.0.pdf',
                url: 'https://raw.githubusercontent.com/SWATEngineering/SWATEngineering.github.io/main/2_RTB/PianoDiQualifica_1.0.pdf',
                size: '501Kb',
            },
            {
                isDir: 1,
                name: 'VerbaliEsterni',
                url: 'https://github.com/SWATEngineering/SWATEngineering.github.io/tree/main/2_RTB/VerbaliEsterni',
                size: '0b',
                dir: [
                    {
                        isDir: 0,
                        name: 'VerbaleEsterno_231110_0.2_firmato.pdf',
                        url: 'https://raw.githubusercontent.com/SWATEngineering/SWATEngineering.github.io/main/2_RTB/VerbaliEsterni/VerbaleEsterno_231110_0.2_firmato.pdf',
                        size: '2Mb',
                    },
                    {
                        isDir: 0,
                        name: 'VerbaleEsterno_231124_0.1_firmato.pdf',
                        url: 'https://raw.githubusercontent.com/SWATEngineering/SWATEngineering.github.io/main/2_RTB/VerbaliEsterni/VerbaleEsterno_231124_0.1_firmato.pdf',
                        size: '307Kb',
                    },
                    {
                        isDir: 0,
                        name: 'VerbaleEsterno_231206_0.1_firmato.pdf',
                        url: 'https://raw.githubusercontent.com/SWATEngineering/SWATEngineering.github.io/main/2_RTB/VerbaliEsterni/VerbaleEsterno_231206_0.1_firmato.pdf',
                        size: '234Kb',
                    },
                    {
                        isDir: 0,
                        name: 'VerbaleEsterno_231221_0.1_firmato.pdf',
                        url: 'https://raw.githubusercontent.com/SWATEngineering/SWATEngineering.github.io/main/2_RTB/VerbaliEsterni/VerbaleEsterno_231221_0.1_firmato.pdf',
                        size: '233Kb',
                    },
                    {
                        isDir: 0,
                        name: 'VerbaleEsterno_240111_0.1_firmato.pdf',
                        url: 'https://raw.githubusercontent.com/SWATEngineering/SWATEngineering.github.io/main/2_RTB/VerbaliEsterni/VerbaleEsterno_240111_0.1_firmato.pdf',
                        size: '233Kb',
                    },
                ],
            },
            {
                isDir: 1,
                name: 'VerbaliInterni',
                url: 'https://github.com/SWATEngineering/SWATEngineering.github.io/tree/main/2_RTB/VerbaliInterni',
                size: '0b',
                dir: [
                    {
                        isDir: 0,
                        name: 'VerbaleInterno_231107_0.2.pdf',
                        url: 'https://raw.githubusercontent.com/SWATEngineering/SWATEngineering.github.io/main/2_RTB/VerbaliInterni/VerbaleInterno_231107_0.2.pdf',
                        size: '161Kb',
                    },
                    {
                        isDir: 0,
                        name: 'VerbaleInterno_231114_0.2.pdf',
                        url: 'https://raw.githubusercontent.com/SWATEngineering/SWATEngineering.github.io/main/2_RTB/VerbaliInterni/VerbaleInterno_231114_0.2.pdf',
                        size: '141Kb',
                    },
                    {
                        isDir: 0,
                        name: 'VerbaleInterno_231121_0.2.pdf',
                        url: 'https://raw.githubusercontent.com/SWATEngineering/SWATEngineering.github.io/main/2_RTB/VerbaliInterni/VerbaleInterno_231121_0.2.pdf',
                        size: '151Kb',
                    },
                    {
                        isDir: 0,
                        name: 'VerbaleInterno_231124_0.1.pdf',
                        url: 'https://raw.githubusercontent.com/SWATEngineering/SWATEngineering.github.io/main/2_RTB/VerbaliInterni/VerbaleInterno_231124_0.1.pdf',
                        size: '127Kb',
                    },
                    {
                        isDir: 0,
                        name: 'VerbaleInterno_231201_0.1.pdf',
                        url: 'https://raw.githubusercontent.com/SWATEngineering/SWATEngineering.github.io/main/2_RTB/VerbaliInterni/VerbaleInterno_231201_0.1.pdf',
                        size: '143Kb',
                    },
                    {
                        isDir: 0,
                        name: 'VerbaleInterno_231208_0.1.pdf',
                        url: 'https://raw.githubusercontent.com/SWATEngineering/SWATEngineering.github.io/main/2_RTB/VerbaliInterni/VerbaleInterno_231208_0.1.pdf',
                        size: '147Kb',
                    },
                    {
                        isDir: 0,
                        name: 'VerbaleInterno_231215_0.1.pdf',
                        url: 'https://raw.githubusercontent.com/SWATEngineering/SWATEngineering.github.io/main/2_RTB/VerbaliInterni/VerbaleInterno_231215_0.1.pdf',
                        size: '138Kb',
                    },
                    {
                        isDir: 0,
                        name: 'VerbaleInterno_231221_0.1.pdf',
                        url: 'https://raw.githubusercontent.com/SWATEngineering/SWATEngineering.github.io/main/2_RTB/VerbaliInterni/VerbaleInterno_231221_0.1.pdf',
                        size: '150Kb',
                    },
                    {
                        isDir: 0,
                        name: 'VerbaleInterno_240104_0.1.pdf',
                        url: 'https://raw.githubusercontent.com/SWATEngineering/SWATEngineering.github.io/main/2_RTB/VerbaliInterni/VerbaleInterno_240104_0.1.pdf',
                        size: '150Kb',
                    },
                    {
                        isDir: 0,
                        name: 'VerbaleInterno_240111_0.1.pdf',
                        url: 'https://raw.githubusercontent.com/SWATEngineering/SWATEngineering.github.io/main/2_RTB/VerbaliInterni/VerbaleInterno_240111_0.1.pdf',
                        size: '156Kb',
                    },
                ],
            },
        ],
    },
    {
        isDir: 1,
        name: '3_PB',
        url: 'https://github.com/SWATEngineering/SWATEngineering.github.io/tree/main/3_PB',
        size: '0b',
        dir: [
            {
                isDir: 0,
                name: 'AnalisiDeiRequisiti_2.0.pdf',
                url: 'https://raw.githubusercontent.com/SWATEngineering/SWATEngineering.github.io/main/3_PB/AnalisiDeiRequisiti_2.0.pdf',
                size: '2Mb',
            },
            {
                isDir: 0,
                name: 'Glossario_2.0.pdf',
                url: 'https://raw.githubusercontent.com/SWATEngineering/SWATEngineering.github.io/main/3_PB/Glossario_2.0.pdf',
                size: '177Kb',
            },
            {
                isDir: 0,
                name: 'LetteraDiPresentazionePB_.pdf',
                url: 'https://raw.githubusercontent.com/SWATEngineering/SWATEngineering.github.io/main/3_PB/LetteraDiPresentazionePB_.pdf',
                size: '132Kb',
            },
            {
                isDir: 0,
                name: 'ManualeUtente_1.0.pdf',
                url: 'https://raw.githubusercontent.com/SWATEngineering/SWATEngineering.github.io/main/3_PB/ManualeUtente_1.0.pdf',
                size: '4Mb',
            },
            {
                isDir: 0,
                name: 'NormeDiProgetto_2.0.pdf',
                url: 'https://raw.githubusercontent.com/SWATEngineering/SWATEngineering.github.io/main/3_PB/NormeDiProgetto_2.0.pdf',
                size: '736Kb',
            },
            {
                isDir: 0,
                name: 'PianoDiProgetto_2.0.pdf',
                url: 'https://raw.githubusercontent.com/SWATEngineering/SWATEngineering.github.io/main/3_PB/PianoDiProgetto_2.0.pdf',
                size: '4Mb',
            },
            {
                isDir: 0,
                name: 'PianoDiQualifica_2.0.pdf',
                url: 'https://raw.githubusercontent.com/SWATEngineering/SWATEngineering.github.io/main/3_PB/PianoDiQualifica_2.0.pdf',
                size: '648Kb',
            },
            {
                isDir: 0,
                name: 'SpecificaTecnica_1.0.pdf',
                url: 'https://raw.githubusercontent.com/SWATEngineering/SWATEngineering.github.io/main/3_PB/SpecificaTecnica_1.0.pdf',
                size: '2Mb',
            },
            {
                isDir: 1,
                name: 'VerbaliEsterni',
                url: 'https://github.com/SWATEngineering/SWATEngineering.github.io/tree/main/3_PB/VerbaliEsterni',
                size: '0b',
                dir: [
                    {
                        isDir: 0,
                        name: 'VerbaleEsterno_240223_firmato_0.1.pdf',
                        url: 'https://raw.githubusercontent.com/SWATEngineering/SWATEngineering.github.io/main/3_PB/VerbaliEsterni/VerbaleEsterno_240223_firmato_0.1.pdf',
                        size: '273Kb',
                    },
                    {
                        isDir: 0,
                        name: 'VerbaleEsterno_240313_firmato_0.1.pdf',
                        url: 'https://raw.githubusercontent.com/SWATEngineering/SWATEngineering.github.io/main/3_PB/VerbaliEsterni/VerbaleEsterno_240313_firmato_0.1.pdf',
                        size: '222Kb',
                    },
                    {
                        isDir: 0,
                        name: 'VerbaleEsterno_240320_firmato_0.1.pdf',
                        url: 'https://raw.githubusercontent.com/SWATEngineering/SWATEngineering.github.io/main/3_PB/VerbaliEsterni/VerbaleEsterno_240320_firmato_0.1.pdf',
                        size: '542Kb',
                    },
                    {
                        isDir: 0,
                        name: 'VerbaleEsterno_240402_firmato_0.1.pdf',
                        url: 'https://raw.githubusercontent.com/SWATEngineering/SWATEngineering.github.io/main/3_PB/VerbaliEsterni/VerbaleEsterno_240402_firmato_0.1.pdf',
                        size: '571Kb',
                    },
                ],
            },
            {
                isDir: 1,
                name: 'VerbaliInterni',
                url: 'https://github.com/SWATEngineering/SWATEngineering.github.io/tree/main/3_PB/VerbaliInterni',
                size: '0b',
                dir: [
                    {
                        isDir: 0,
                        name: 'VerbaleInterno_240215_0.2.pdf',
                        url: 'https://raw.githubusercontent.com/SWATEngineering/SWATEngineering.github.io/main/3_PB/VerbaliInterni/VerbaleInterno_240215_0.2.pdf',
                        size: '144Kb',
                    },
                    {
                        isDir: 0,
                        name: 'VerbaleInterno_240223_0.1.pdf',
                        url: 'https://raw.githubusercontent.com/SWATEngineering/SWATEngineering.github.io/main/3_PB/VerbaliInterni/VerbaleInterno_240223_0.1.pdf',
                        size: '139Kb',
                    },
                    {
                        isDir: 0,
                        name: 'VerbaleInterno_240301_0.1.pdf',
                        url: 'https://raw.githubusercontent.com/SWATEngineering/SWATEngineering.github.io/main/3_PB/VerbaliInterni/VerbaleInterno_240301_0.1.pdf',
                        size: '149Kb',
                    },
                    {
                        isDir: 0,
                        name: 'VerbaleInterno_240304_0.1.pdf',
                        url: 'https://raw.githubusercontent.com/SWATEngineering/SWATEngineering.github.io/main/3_PB/VerbaliInterni/VerbaleInterno_240304_0.1.pdf',
                        size: '149Kb',
                    },
                    {
                        isDir: 0,
                        name: 'VerbaleInterno_240308_0.1.pdf',
                        url: 'https://raw.githubusercontent.com/SWATEngineering/SWATEngineering.github.io/main/3_PB/VerbaliInterni/VerbaleInterno_240308_0.1.pdf',
                        size: '150Kb',
                    },
                    {
                        isDir: 0,
                        name: 'VerbaleInterno_240315_0.1.pdf',
                        url: 'https://raw.githubusercontent.com/SWATEngineering/SWATEngineering.github.io/main/3_PB/VerbaliInterni/VerbaleInterno_240315_0.1.pdf',
                        size: '154Kb',
                    },
                    {
                        isDir: 0,
                        name: 'VerbaleInterno_240322_0.1.pdf',
                        url: 'https://raw.githubusercontent.com/SWATEngineering/SWATEngineering.github.io/main/3_PB/VerbaliInterni/VerbaleInterno_240322_0.1.pdf',
                        size: '137Kb',
                    },
                    {
                        isDir: 0,
                        name: 'VerbaleInterno_240329_0.1.pdf',
                        url: 'https://raw.githubusercontent.com/SWATEngineering/SWATEngineering.github.io/main/3_PB/VerbaliInterni/VerbaleInterno_240329_0.1.pdf',
                        size: '150Kb',
                    },
                ],
            },
        ],
    },
];
const dirCards = data
    .filter((item) => item.isDir === 1)
    .sort()
    .reverse()
    .map((item) => {
        return `
                <h2><a href="${item.url}" target="_blank">🗂️ ${item.name.slice(
            2
        )}</a></h2>
                <ul>
                    ${item.dir
                        .map((subItem) => {
                            return `<li>${from_item_to_card(subItem, 3)}</li>`;
                        })
                        .join('')}
                </ul>
                ${item.name.slice(2) == 'Candidatura' ? '' : '<hr>'}
            `;
    })
    .join('');
const fileCards = data
    .filter((item) => item.isDir === 0)
    .map((item) => {
        return from_item_to_card(item, 2);
    })
    .join('');
const content = fileCards + dirCards;
let elementToHydrate = document.getElementById('documenti');
elementToHydrate.innerHTML = '<h1>DOCUMENTI</h1>';
elementToHydrate.innerHTML += content;

function from_item_to_card(item, depth) {
    let icon = item.isDir == 1 ? '🗂️' : '📄';
    let opening_tag = item.isDir == 1 ? `<h${depth}>` : '<p>';
    let extension = item.name.slice(-3);
    let closing_tag =
        item.isDir == 1
            ? `</h${depth}>`
            : ` <span id="download">(download ${extension}: ${item.size})</span></p>`;
    item.name = item.name.replace('RTB', ' {rtb}');
    item.name = item.name.replace('PB', ' {pb}');
    item.name = item.name.replace('CA', ' {ca}');
    item.name =
        item.name.slice(0, 1) +
        item.name
            .slice(1)
            .split('')
            .map((c) => (c <= 'Z' && c >= 'A' ? ' ' + c.toLowerCase() : c))
            .join('');
    if (item.isDir !== 1) {
        item.name = item.name.slice(0, -4).split('_');
        if (item.name.length == 2) {
            item.name =
                item.name[0] +
                (item.name[1].length !== 0 ? ' [v' + item.name[1] + ']' : '');
        } else if (item.name.length == 3) {
            let year = item.name[1].slice(0, 2);
            let month = item.name[1].slice(2, 4);
            let day = item.name[1].slice(4);
            item.name =
                item.name[0] +
                ' [' +
                day +
                '/' +
                month +
                '/' +
                year +
                ' - v' +
                item.name[2] +
                ']';
        } else if (item.name.length == 4) {
            let year = item.name[1].slice(0, 2);
            let month = item.name[1].slice(2, 4);
            let day = item.name[1].slice(4);
            item.name =
                item.name[0] +
                ' [' +
                day +
                '/' +
                month +
                '/' +
                year +
                ' - v' +
                item.name[3] +
                '] ' +
                '<b>firmato</b>';
        } else {
            item.name = item.name.join(' ');
        }
    }
    item.name = item.name.replace('{rtb}', 'RTB');
    item.name = item.name.replace('{pb}', 'PB');
    item.name = item.name.replace('{ca}', 'CA');

    let card = `
            <a href="${item.url}" target="_blank">${opening_tag}${icon} ${item.name}${closing_tag}</a>
        `;
    if (item.isDir === 1) {
        card =
            card +
            `
                <ul>
                    ${item.dir
                        .sort((a, b) => {
                            return a.name < b.name ? 1 : -1;
                        })
                        .map((subItem) => {
                            return `<li>${from_item_to_card(
                                subItem,
                                depth + 1
                            )}</li>`;
                        })
                        .join('')}
                </ul>
        `;
    }
    return card;
}
